{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows/Documents/AIGP/aigp/context/SettingsContext.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useState, ReactNode } from 'react';\n\ninterface SettingsContextType {\n  language: string;\n  setLanguage: (language: string) => void;\n}\n\nconst SettingsContext = createContext<SettingsContextType | undefined>(undefined);\n\nexport const SettingsProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\n  const [language, setLanguage] = useState<string>('Portugu√™s do Brasil');\n\n  return (\n    <SettingsContext.Provider value={{ language, setLanguage }}>\n      {children}\n    </SettingsContext.Provider>\n  );\n};\n\nexport const useSettings = (): SettingsContextType => {\n  const context = useContext(SettingsContext);\n  if (context === undefined) {\n    throw new Error('useSettings must be used within a SettingsProvider');\n  }\n  return context;\n};"],"names":[],"mappings":";;;;;;;AAEA;AAFA;;;AASA,MAAM,gCAAkB,IAAA,sNAAa,EAAkC;AAEhE,MAAM,mBAAsD,CAAC,EAAE,QAAQ,EAAE;IAC9E,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAS;IAEjD,qBACE,8OAAC,gBAAgB,QAAQ;QAAC,OAAO;YAAE;YAAU;QAAY;kBACtD;;;;;;AAGP;AAEO,MAAM,cAAc;IACzB,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows/Documents/AIGP/aigp/components/Sidebar.tsx"],"sourcesContent":["\n\"use client\";\n\nimport React from 'react';\n\n// FIX: Define and export SidebarIcon component for use in App.tsx\ninterface SidebarIconProps {\n  icon: React.ReactNode;\n  text: string;\n  active?: boolean;\n  onClick?: () => void;\n}\n\ninterface SidebarIconProps {\n  icon: React.ReactNode;\n  text: string;\n  active?: boolean;\n  onClick?: () => void;\n}\n\nexport const SidebarIcon: React.FC<SidebarIconProps> = ({ icon, text, active, onClick }) => (\n  <div\n    onClick={onClick}\n    className={`flex items-center gap-3 px-3 py-2 rounded-md cursor-pointer transition-colors\n    ${active ? \"bg-primary/20 text-primary\" : \"text-gray-400 hover:bg-gray-700 hover:text-white\"}`}\n  >\n    {icon}\n    <span className=\"font-medium\">{text}</span>\n  </div>\n);\n\n\n\ninterface SidebarProps {\n    children: React.ReactNode;\n}\n\n// FIX: Modify Sidebar component to accept children, making it composable from App.tsx.\nexport const Sidebar: React.FC<SidebarProps> = ({ children }) => {\n    return (\n        <aside className=\"h-screen\">\n        <nav className=\"h-full flex flex-col bg-gray-800 border-r border-gray-700 shadow-sm\">\n            <div className=\"p-4 pb-2 flex justify-center items-center\">\n                <span className=\"text-xl font-bold text-primary\">P</span>\n                <span className=\"text-xl font-bold text-white\">N</span>\n                <span className=\"text-xl font-bold text-primary\">A</span>\n                <span className=\"text-xl font-bold text-white\">I</span>\n            </div>\n            <div className=\"flex flex-col flex-1 px-3 mt-4\">\n               {children}\n            </div>\n        </nav>\n        </aside>\n  );\n};"],"names":[],"mappings":";;;;;;;AACA;;AAmBO,MAAM,cAA0C,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,iBACrF,8OAAC;QACC,SAAS;QACT,WAAW,CAAC;IACZ,EAAE,SAAS,+BAA+B,oDAAoD;;YAE7F;0BACD,8OAAC;gBAAK,WAAU;0BAAe;;;;;;;;;;;;AAW5B,MAAM,UAAkC,CAAC,EAAE,QAAQ,EAAE;IACxD,qBACI,8OAAC;QAAM,WAAU;kBACjB,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAK,WAAU;sCAAiC;;;;;;sCACjD,8OAAC;4BAAK,WAAU;sCAA+B;;;;;;sCAC/C,8OAAC;4BAAK,WAAU;sCAAiC;;;;;;sCACjD,8OAAC;4BAAK,WAAU;sCAA+B;;;;;;;;;;;;8BAEnD,8OAAC;oBAAI,WAAU;8BACX;;;;;;;;;;;;;;;;;AAKhB","debugId":null}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows/Documents/AIGP/aigp/types.ts"],"sourcesContent":["export enum NomeAgente {\n  CALENDARIO = 'Sincroniza√ß√£o com Google Calendar',\n  ESCRITOR = 'IA Escritora de Not√≠cias',\n  FORMATADOR = 'IA Formatadora de HTML',\n  SEO = 'IA Analista de SEO',\n  PUBLICADOR = 'Publicador de Blog',\n}\n\nexport enum StatusAgente {\n  PENDENTE = 'Pendente',\n  EXECUTANDO = 'Executando',\n  CONCLUIDO = 'Conclu√≠do',\n  ERRO = 'Erro',\n}\n\nexport interface Agente {\n  name: NomeAgente;\n  description: string;\n  status: StatusAgente;\n  model?: string;\n}\n\nexport interface EventoCalendario {\n  summary: string;\n  date: string;\n}\n\nexport interface ArtigoNoticia {\n  id?: string;\n  generationDate: string;\n  title: string;\n  rawContent: string;\n  formattedContent: string;\n  published: boolean;\n   keywords: string[]; // ‚úÖ Corrigido (era string)\n  metaDescription: string;\n}"],"names":[],"mappings":";;;;;;AAAO,IAAA,AAAK,oCAAA;;;;;;WAAA;;AAQL,IAAA,AAAK,sCAAA;;;;;WAAA","debugId":null}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows/Documents/AIGP/aigp/components/SettingsScreen.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { NomeAgente } from \"../types\";\nimport {\n  Bot,\n  Calendar,\n  UploadCloud,\n  FileText,\n  Upload,\n  Languages,\n  KeyRound,\n  Search,\n  Loader2,\n  CheckCircle2,\n} from \"lucide-react\";\n\ninterface AgentConfig {\n  instructions: string;\n  files: File[];\n}\n\ninterface AiSettings {\n  id: string;\n  agent_name: string;\n  ai_model: string;\n  calendar_id: string;\n  focus_keywords: string;\n  remote_post_url: string;\n  remote_post_api_key: string;\n  json_format_template: string;\n  writer_instructions: string;\n  formatter_instructions: string;\n  seo_instructions: string;\n}\n\nconst defaultWriterInstructions = `Voc√™ √© um jornalista de IA especializado em criar artigos claros e inspiradores sobre f√© e espiritualidade.`;\nconst defaultFormatterInstructions = `Voc√™ √© um especialista em HTML que transforma artigos em HTML sem√¢ntico e bonito, usando classes TailwindCSS.`;\nconst defaultSeoInstructions = `Voc√™ √© um especialista em SEO e otimiza√ß√£o de conte√∫do. Gere palavras-chave e meta descriptions relevantes.`;\n\nconst AgentConfigCard: React.FC<{\n  title: NomeAgente;\n  model: string;\n  config: AgentConfig;\n  setConfig: (config: AgentConfig) => void;\n  icon: React.ReactNode;\n}> = ({ title, model, config, setConfig, icon }) => {\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files) {\n      setConfig({\n        ...config,\n        files: [...config.files, ...Array.from(e.target.files)],\n      });\n    }\n  };\n\n  return (\n    <div className=\"bg-gray-800/50 border border-gray-700 rounded-lg p-6\">\n      <div className=\"flex items-center gap-3 mb-2\">\n        {icon}\n        <h3 className=\"text-xl font-semibold text-white\">{title}</h3>\n      </div>\n      <p className=\"text-sm text-gray-500 font-mono bg-gray-900 px-2 py-1 rounded w-fit mb-4\">\n        {model}\n      </p>\n      <textarea\n        value={config.instructions}\n        onChange={(e) => setConfig({ ...config, instructions: e.target.value })}\n        rows={8}\n        className=\"block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-gray-200 sm:text-sm focus:ring-primary focus:border-primary\"\n      />\n      <div className=\"mt-4\">\n        <label className=\"block text-sm font-medium text-gray-400 mb-1\">\n          Arquivos de Conhecimento\n        </label>\n        <div className=\"flex flex-col items-center justify-center border-2 border-dashed border-gray-600 rounded-md py-6\">\n          <Upload size={40} className=\"text-gray-500\" />\n          <label\n            htmlFor={`file-upload-${title}`}\n            className=\"cursor-pointer text-primary hover:underline mt-2\"\n          >\n            Carregar arquivos\n          </label>\n          <input\n            id={`file-upload-${title}`}\n            type=\"file\"\n            className=\"hidden\"\n            multiple\n            onChange={handleFileChange}\n          />\n        </div>\n        {config.files.length > 0 && (\n          <ul className=\"mt-2 text-gray-400 text-sm space-y-1\">\n            {config.files.map((file, i) => (\n              <li key={i} className=\"flex items-center gap-2\">\n                <FileText size={14} /> {file.name}\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport const SettingsScreen: React.FC = () => {\n  const [settings, setSettings] = useState<AiSettings | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [saved, setSaved] = useState(false);\n\n  const [writerConfig, setWriterConfig] = useState<AgentConfig>({\n    instructions: defaultWriterInstructions,\n    files: [],\n  });\n  const [formatterConfig, setFormatterConfig] = useState<AgentConfig>({\n    instructions: defaultFormatterInstructions,\n    files: [],\n  });\n  const [seoConfig, setSeoConfig] = useState<AgentConfig>({\n    instructions: defaultSeoInstructions,\n    files: [],\n  });\n\n  // üîπ Carregar configs do banco\n  useEffect(() => {\n    async function loadSettings() {\n      try {\n        const res = await fetch(\"/api/settings\");\n        if (!res.ok) throw new Error(\"Erro ao carregar configura√ß√µes\");\n        const data = await res.json();\n        setSettings(data);\n\n        // üß† Atualiza os campos de texto dos agentes com os valores do banco\n        setWriterConfig({\n          instructions: data.writer_instructions || defaultWriterInstructions,\n          files: [],\n        });\n        setFormatterConfig({\n          instructions:\n            data.formatter_instructions || defaultFormatterInstructions,\n          files: [],\n        });\n        setSeoConfig({\n          instructions: data.seo_instructions || defaultSeoInstructions,\n          files: [],\n        });\n      } catch (err) {\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    }\n    loadSettings();\n  }, []);\n\n  // üîπ Salvar altera√ß√µes\n  const handleSaveChanges = async () => {\n    if (!settings) return;\n    setSaving(true);\n    setSaved(false);\n\n    try {\n      const payload = {\n        ai_model: settings.ai_model || \"gemini-1.5-flash\",\n        calendar_id: settings.calendar_id,\n        focus_keywords: settings.focus_keywords,\n        remote_post_url: settings.remote_post_url,\n        remote_post_api_key: settings.remote_post_api_key,\n        json_format_template: settings.json_format_template,\n\n        writer_instructions: writerConfig.instructions,\n        writer_files: JSON.stringify(\n          writerConfig.files.map((f) => ({ name: f.name, size: f.size }))\n        ),\n\n        formatter_instructions: formatterConfig.instructions,\n        formatter_files: JSON.stringify(\n          formatterConfig.files.map((f) => ({ name: f.name, size: f.size }))\n        ),\n\n        seo_instructions: seoConfig.instructions,\n        seo_files: JSON.stringify(\n          seoConfig.files.map((f) => ({ name: f.name, size: f.size }))\n        ),\n      };\n\n      console.log(\"üß† Salvando configura√ß√µes...\", payload);\n\n      const res = await fetch(\"/api/settings\", {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(payload),\n      });\n\n      if (!res.ok) throw new Error(\"Erro ao salvar configura√ß√µes no servidor\");\n\n      setSaved(true);\n      console.log(\"‚úÖ Configura√ß√µes salvas com sucesso!\");\n    } catch (err) {\n      console.error(\"‚ùå Falha ao salvar configura√ß√µes:\", err);\n      alert(\"Erro ao salvar configura√ß√µes.\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center py-10 text-gray-300\">\n        <Loader2 className=\"animate-spin mr-2\" /> Carregando configura√ß√µes...\n      </div>\n    );\n  }\n\n  if (!settings) {\n    return (\n      <div className=\"text-center py-10 text-red-400\">\n        Nenhuma configura√ß√£o encontrada no banco.\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8 max-w-4xl mx-auto\">\n      <div>\n        <h1 className=\"text-3xl font-bold text-white\">\n          ‚öôÔ∏è Configura√ß√µes do Agente\n        </h1>\n        <p className=\"mt-2 text-gray-400\">\n          Personalize integra√ß√µes e comportamento dos agentes de IA.\n        </p>\n      </div>\n\n      {/* Configura√ß√µes principais */}\n      <div className=\"bg-gray-800 border border-gray-700 rounded-lg p-8 space-y-6\">\n        <h2 className=\"text-xl font-semibold text-white mb-6\">\n          Configura√ß√µes de Integra√ß√£o\n        </h2>\n\n        <div>\n          <label className=\"flex items-center gap-2 text-lg font-medium text-gray-300 mb-2\">\n            <Languages size={20} /> Idioma / Modelo de IA\n          </label>\n          <input\n            type=\"text\"\n            value={settings.ai_model}\n            onChange={(e) =>\n              setSettings({ ...settings, ai_model: e.target.value })\n            }\n            className=\"block w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-gray-200 focus:ring-primary focus:border-primary\"\n          />\n        </div>\n\n        <div>\n          <label className=\"flex items-center gap-2 text-lg font-medium text-gray-300 mb-2\">\n            <KeyRound size={20} /> Palavras-chave de Foco\n          </label>\n          <textarea\n            value={settings.focus_keywords || \"\"}\n            onChange={(e) =>\n              setSettings({ ...settings, focus_keywords: e.target.value })\n            }\n            rows={3}\n            className=\"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-gray-200\"\n          />\n        </div>\n\n        <div>\n          <label className=\"flex items-center gap-2 text-lg font-medium text-gray-300 mb-2\">\n            <Calendar size={20} /> ID do Calend√°rio\n          </label>\n          <input\n            type=\"text\"\n            value={settings.calendar_id || \"\"}\n            onChange={(e) =>\n              setSettings({ ...settings, calendar_id: e.target.value })\n            }\n            className=\"block w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-gray-200\"\n          />\n        </div>\n\n        <div>\n          <label className=\"flex items-center gap-2 text-lg font-medium text-gray-300 mb-2\">\n            <UploadCloud size={20} /> URL da API Remote Post\n          </label>\n          <input\n            type=\"text\"\n            value={settings.remote_post_url || \"\"}\n            onChange={(e) =>\n              setSettings({ ...settings, remote_post_url: e.target.value })\n            }\n            className=\"block w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-gray-200\"\n          />\n          <label className=\"block text-sm text-gray-400 mt-4 mb-1\">\n            Corpo do JSON\n          </label>\n          <textarea\n            value={settings.json_format_template || \"\"}\n            onChange={(e) =>\n              setSettings({\n                ...settings,\n                json_format_template: e.target.value,\n              })\n            }\n            rows={6}\n            className=\"font-mono w-full bg-gray-900 border border-gray-600 rounded-md py-2 px-3 text-gray-200\"\n          />\n        </div>\n      </div>\n\n      {/* Se√ß√£o dos Agentes */}\n      <div className=\"space-y-6\">\n        <h2 className=\"text-xl font-semibold text-white\">\n          Configura√ß√£o dos Agentes\n        </h2>\n\n        <AgentConfigCard\n          title={NomeAgente.ESCRITOR}\n          model={settings.ai_model}\n          config={writerConfig}\n          setConfig={setWriterConfig}\n          icon={<Bot size={24} className=\"text-primary\" />}\n        />\n        <AgentConfigCard\n          title={NomeAgente.FORMATADOR}\n          model={settings.ai_model}\n          config={formatterConfig}\n          setConfig={setFormatterConfig}\n          icon={<Bot size={24} className=\"text-primary\" />}\n        />\n        <AgentConfigCard\n          title={NomeAgente.SEO}\n          model={settings.ai_model}\n          config={seoConfig}\n          setConfig={setSeoConfig}\n          icon={<Search size={24} className=\"text-primary\" />}\n        />\n      </div>\n\n      <div className=\"pt-4 flex justify-end\">\n        <button\n          onClick={handleSaveChanges}\n          disabled={saving}\n          className={`px-6 py-2 font-semibold text-white rounded-lg shadow-md transition-colors ${\n            saving\n              ? \"bg-gray-600 cursor-wait\"\n              : \"bg-primary hover:bg-primary-hover\"\n          }`}\n        >\n          {saving ? (\n            <span className=\"flex items-center gap-2\">\n              <Loader2 className=\"animate-spin\" /> Salvando...\n            </span>\n          ) : saved ? (\n            <span className=\"flex items-center gap-2 text-green-400\">\n              <CheckCircle2 /> Salvo!\n            </span>\n          ) : (\n            \"Salvar Altera√ß√µes\"\n          )}\n        </button>\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;;;;;AAoCA,MAAM,4BAA4B,CAAC,2GAA2G,CAAC;AAC/I,MAAM,+BAA+B,CAAC,6GAA6G,CAAC;AACpJ,MAAM,yBAAyB,CAAC,2GAA2G,CAAC;AAE5I,MAAM,kBAMD,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE;IAC7C,MAAM,mBAAmB,CAAC;QACxB,IAAI,EAAE,MAAM,CAAC,KAAK,EAAE;YAClB,UAAU;gBACR,GAAG,MAAM;gBACT,OAAO;uBAAI,OAAO,KAAK;uBAAK,MAAM,IAAI,CAAC,EAAE,MAAM,CAAC,KAAK;iBAAE;YACzD;QACF;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;oBACZ;kCACD,8OAAC;wBAAG,WAAU;kCAAoC;;;;;;;;;;;;0BAEpD,8OAAC;gBAAE,WAAU;0BACV;;;;;;0BAEH,8OAAC;gBACC,OAAO,OAAO,YAAY;gBAC1B,UAAU,CAAC,IAAM,UAAU;wBAAE,GAAG,MAAM;wBAAE,cAAc,EAAE,MAAM,CAAC,KAAK;oBAAC;gBACrE,MAAM;gBACN,WAAU;;;;;;0BAEZ,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAM,WAAU;kCAA+C;;;;;;kCAGhE,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,gNAAM;gCAAC,MAAM;gCAAI,WAAU;;;;;;0CAC5B,8OAAC;gCACC,SAAS,CAAC,YAAY,EAAE,OAAO;gCAC/B,WAAU;0CACX;;;;;;0CAGD,8OAAC;gCACC,IAAI,CAAC,YAAY,EAAE,OAAO;gCAC1B,MAAK;gCACL,WAAU;gCACV,QAAQ;gCACR,UAAU;;;;;;;;;;;;oBAGb,OAAO,KAAK,CAAC,MAAM,GAAG,mBACrB,8OAAC;wBAAG,WAAU;kCACX,OAAO,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,kBACvB,8OAAC;gCAAW,WAAU;;kDACpB,8OAAC,0NAAQ;wCAAC,MAAM;;;;;;oCAAM;oCAAE,KAAK,IAAI;;+BAD1B;;;;;;;;;;;;;;;;;;;;;;AASvB;AAEO,MAAM,iBAA2B;IACtC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAoB;IAC5D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAc;QAC5D,cAAc;QACd,OAAO,EAAE;IACX;IACA,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAc;QAClE,cAAc;QACd,OAAO,EAAE;IACX;IACA,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAc;QACtD,cAAc;QACd,OAAO,EAAE;IACX;IAEA,+BAA+B;IAC/B,IAAA,kNAAS,EAAC;QACR,eAAe;YACb,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM;gBACxB,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;gBAC7B,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,YAAY;gBAEZ,qEAAqE;gBACrE,gBAAgB;oBACd,cAAc,KAAK,mBAAmB,IAAI;oBAC1C,OAAO,EAAE;gBACX;gBACA,mBAAmB;oBACjB,cACE,KAAK,sBAAsB,IAAI;oBACjC,OAAO,EAAE;gBACX;gBACA,aAAa;oBACX,cAAc,KAAK,gBAAgB,IAAI;oBACvC,OAAO,EAAE;gBACX;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC;YAChB,SAAU;gBACR,WAAW;YACb;QACF;QACA;IACF,GAAG,EAAE;IAEL,uBAAuB;IACvB,MAAM,oBAAoB;QACxB,IAAI,CAAC,UAAU;QACf,UAAU;QACV,SAAS;QAET,IAAI;YACF,MAAM,UAAU;gBACd,UAAU,SAAS,QAAQ,IAAI;gBAC/B,aAAa,SAAS,WAAW;gBACjC,gBAAgB,SAAS,cAAc;gBACvC,iBAAiB,SAAS,eAAe;gBACzC,qBAAqB,SAAS,mBAAmB;gBACjD,sBAAsB,SAAS,oBAAoB;gBAEnD,qBAAqB,aAAa,YAAY;gBAC9C,cAAc,KAAK,SAAS,CAC1B,aAAa,KAAK,CAAC,GAAG,CAAC,CAAC,IAAM,CAAC;wBAAE,MAAM,EAAE,IAAI;wBAAE,MAAM,EAAE,IAAI;oBAAC,CAAC;gBAG/D,wBAAwB,gBAAgB,YAAY;gBACpD,iBAAiB,KAAK,SAAS,CAC7B,gBAAgB,KAAK,CAAC,GAAG,CAAC,CAAC,IAAM,CAAC;wBAAE,MAAM,EAAE,IAAI;wBAAE,MAAM,EAAE,IAAI;oBAAC,CAAC;gBAGlE,kBAAkB,UAAU,YAAY;gBACxC,WAAW,KAAK,SAAS,CACvB,UAAU,KAAK,CAAC,GAAG,CAAC,CAAC,IAAM,CAAC;wBAAE,MAAM,EAAE,IAAI;wBAAE,MAAM,EAAE,IAAI;oBAAC,CAAC;YAE9D;YAEA,QAAQ,GAAG,CAAC,gCAAgC;YAE5C,MAAM,MAAM,MAAM,MAAM,iBAAiB;gBACvC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;YAE7B,SAAS;YACT,QAAQ,GAAG,CAAC;QACd,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,oCAAoC;YAClD,MAAM;QACR,SAAU;YACR,UAAU;QACZ;IACF;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC,4NAAO;oBAAC,WAAU;;;;;;gBAAsB;;;;;;;IAG/C;IAEA,IAAI,CAAC,UAAU;QACb,qBACE,8OAAC;YAAI,WAAU;sBAAiC;;;;;;IAIpD;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;;kCACC,8OAAC;wBAAG,WAAU;kCAAgC;;;;;;kCAG9C,8OAAC;wBAAE,WAAU;kCAAqB;;;;;;;;;;;;0BAMpC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAwC;;;;;;kCAItD,8OAAC;;0CACC,8OAAC;gCAAM,WAAU;;kDACf,8OAAC,yNAAS;wCAAC,MAAM;;;;;;oCAAM;;;;;;;0CAEzB,8OAAC;gCACC,MAAK;gCACL,OAAO,SAAS,QAAQ;gCACxB,UAAU,CAAC,IACT,YAAY;wCAAE,GAAG,QAAQ;wCAAE,UAAU,EAAE,MAAM,CAAC,KAAK;oCAAC;gCAEtD,WAAU;;;;;;;;;;;;kCAId,8OAAC;;0CACC,8OAAC;gCAAM,WAAU;;kDACf,8OAAC,0NAAQ;wCAAC,MAAM;;;;;;oCAAM;;;;;;;0CAExB,8OAAC;gCACC,OAAO,SAAS,cAAc,IAAI;gCAClC,UAAU,CAAC,IACT,YAAY;wCAAE,GAAG,QAAQ;wCAAE,gBAAgB,EAAE,MAAM,CAAC,KAAK;oCAAC;gCAE5D,MAAM;gCACN,WAAU;;;;;;;;;;;;kCAId,8OAAC;;0CACC,8OAAC;gCAAM,WAAU;;kDACf,8OAAC,sNAAQ;wCAAC,MAAM;;;;;;oCAAM;;;;;;;0CAExB,8OAAC;gCACC,MAAK;gCACL,OAAO,SAAS,WAAW,IAAI;gCAC/B,UAAU,CAAC,IACT,YAAY;wCAAE,GAAG,QAAQ;wCAAE,aAAa,EAAE,MAAM,CAAC,KAAK;oCAAC;gCAEzD,WAAU;;;;;;;;;;;;kCAId,8OAAC;;0CACC,8OAAC;gCAAM,WAAU;;kDACf,8OAAC,mOAAW;wCAAC,MAAM;;;;;;oCAAM;;;;;;;0CAE3B,8OAAC;gCACC,MAAK;gCACL,OAAO,SAAS,eAAe,IAAI;gCACnC,UAAU,CAAC,IACT,YAAY;wCAAE,GAAG,QAAQ;wCAAE,iBAAiB,EAAE,MAAM,CAAC,KAAK;oCAAC;gCAE7D,WAAU;;;;;;0CAEZ,8OAAC;gCAAM,WAAU;0CAAwC;;;;;;0CAGzD,8OAAC;gCACC,OAAO,SAAS,oBAAoB,IAAI;gCACxC,UAAU,CAAC,IACT,YAAY;wCACV,GAAG,QAAQ;wCACX,sBAAsB,EAAE,MAAM,CAAC,KAAK;oCACtC;gCAEF,MAAM;gCACN,WAAU;;;;;;;;;;;;;;;;;;0BAMhB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAmC;;;;;;kCAIjD,8OAAC;wBACC,OAAO,mHAAU,CAAC,QAAQ;wBAC1B,OAAO,SAAS,QAAQ;wBACxB,QAAQ;wBACR,WAAW;wBACX,oBAAM,8OAAC,uMAAG;4BAAC,MAAM;4BAAI,WAAU;;;;;;;;;;;kCAEjC,8OAAC;wBACC,OAAO,mHAAU,CAAC,UAAU;wBAC5B,OAAO,SAAS,QAAQ;wBACxB,QAAQ;wBACR,WAAW;wBACX,oBAAM,8OAAC,uMAAG;4BAAC,MAAM;4BAAI,WAAU;;;;;;;;;;;kCAEjC,8OAAC;wBACC,OAAO,mHAAU,CAAC,GAAG;wBACrB,OAAO,SAAS,QAAQ;wBACxB,QAAQ;wBACR,WAAW;wBACX,oBAAM,8OAAC,gNAAM;4BAAC,MAAM;4BAAI,WAAU;;;;;;;;;;;;;;;;;0BAItC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBACC,SAAS;oBACT,UAAU;oBACV,WAAW,CAAC,0EAA0E,EACpF,SACI,4BACA,qCACJ;8BAED,uBACC,8OAAC;wBAAK,WAAU;;0CACd,8OAAC,4NAAO;gCAAC,WAAU;;;;;;4BAAiB;;;;;;mEAEpC,sBACF,8OAAC;wBAAK,WAAU;;0CACd,8OAAC,qOAAY;;;;;4BAAG;;;;;;mEAGlB;;;;;;;;;;;;;;;;;AAMZ","debugId":null}},
    {"offset": {"line": 817, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows/Documents/AIGP/aigp/app/actions.ts"],"sourcesContent":["\"use server\";\n\nimport { revalidatePath } from \"next/cache\";\nimport * as geminiService from \"../services/geminiService\";\nimport * as dbService from \"../services/db\";\nimport { ArtigoNoticia } from \"../types\";\n\n/* =========================================================\n   üîπ MODO COMPLETO (para compatibilidade retroativa)\n   ========================================================= */\nexport async function generateAndSaveArticleAction(\n  topic: string,\n  language: string,\n  focusKeywords: string\n): Promise<ArtigoNoticia> {\n  try {\n    // üß† Etapa 1: IA Escritora\n    const rawContent = await geminiService.writeNewsArticle(topic, language, focusKeywords);\n\n    // üé® Etapa 2: IA Formatadora\n    const formattedContent = await geminiService.formatArticleToHtml(rawContent);\n\n    // üîç Etapa 3: IA de SEO\n    const { keywords, metaDescription } = await geminiService.analyzeSeoAndExtractMetadata(rawContent, focusKeywords);\n\n    // üíæ Etapa 4: Salvar tudo no banco\n    const articleToSave: Omit<ArtigoNoticia, \"id\"> = {\n      title: topic,\n      rawContent,\n      formattedContent,\n      generationDate: new Date().toISOString(),\n      published: false,\n      keywords,\n      metaDescription,\n    };\n\n    const savedArticle = await dbService.saveArticle(articleToSave);\n\n    // üîÅ Revalida hist√≥rico no dashboard\n    revalidatePath(\"/dashboard/history\");\n\n    return { ...savedArticle, published: true };\n  } catch (error) {\n    console.error(\"‚ùå Erro em generateAndSaveArticleAction:\", error);\n    throw new Error(`Falha ao gerar e salvar o artigo: ${error instanceof Error ? error.message : String(error)}`);\n  }\n}\n\n/* =========================================================\n   üîπ MODO MODULAR (para pipeline dividido)\n   ========================================================= */\n\n/** 1Ô∏è‚É£ Gera o texto base e salva como rascunho */\nexport async function saveArticleDraft(data: {\n  title: string;\n  content: string;\n  language: string;\n  focusKeywords: string;\n  status?: string;\n}) {\n  try {\n    const articleToSave: Omit<ArtigoNoticia, \"id\"> = {\n      title: data.title,\n      rawContent: data.content,\n      formattedContent: \"\",\n      generationDate: new Date().toISOString(),\n      published: false,\n      keywords: [\"\"],\n      metaDescription: \"\",\n    };\n\n    const saved = await dbService.saveArticle(articleToSave);\n    console.log(`‚úÖ Rascunho salvo com ID: ${saved.id}`);\n    revalidatePath(\"/dashboard/history\");\n    return saved;\n  } catch (error) {\n    console.error(\"‚ùå Erro ao salvar rascunho:\", error);\n    throw new Error(\"Falha ao salvar rascunho.\");\n  }\n}\n\n/** 2Ô∏è‚É£ Busca artigo pelo ID */\nexport async function getArticleById(id: string): Promise<ArtigoNoticia | null> {\n  try {\n    const article = await dbService.getArticleById(id);\n    return article;\n  } catch (error) {\n    console.error(\"‚ùå Erro ao buscar artigo:\", error);\n    return null;\n  }\n}\n\n/** 3Ô∏è‚É£ Atualiza HTML formatado */\nexport async function updateArticleHtml(id: string, formattedContent: string) {\n  try {\n    await dbService.updateArticle(id, { formattedContent });\n    console.log(`üé® HTML atualizado com sucesso para o artigo ${id}`);\n    revalidatePath(\"/dashboard/history\");\n  } catch (error) {\n    console.error(\"‚ùå Erro ao atualizar HTML:\", error);\n    throw new Error(\"Falha ao atualizar o HTML do artigo.\");\n  }\n}\n\n/** 4Ô∏è‚É£ Atualiza dados de SEO e marca como publicado */\n\nexport async function updateArticleSeo(\n  id: string,\n  data: { keywords: string[] | string; metaDescription: string; status?: string }\n) {\n  try {\n    // üß† Garante que keywords sempre ser√° um array de strings\n    let keywords: string[];\n\n    if (Array.isArray(data.keywords)) {\n      keywords = data.keywords;\n    } else if (typeof data.keywords === \"string\") {\n      keywords = data.keywords.split(\",\").map((k) => k.trim());\n    } else {\n      keywords = [];\n    }\n\n    const metaDescription = data.metaDescription || \"\";\n\n    await dbService.updateArticle(id, {\n      keywords,\n      metaDescription,\n      published: true,\n      generationDate: new Date().toISOString(),\n    });\n\n    console.log(`üîç SEO atualizado e artigo ${id} publicado com sucesso.`);\n    revalidatePath(\"/dashboard/history\");\n  } catch (error: any) {\n    console.error(\"‚ùå Erro ao atualizar SEO:\", error);\n    throw new Error(\n      error?.message || \"Falha ao atualizar os dados de SEO do artigo.\"\n    );\n  }\n}\n\n\n\n/* =========================================================\n   üîπ LISTAGEM (inalterada)\n   ========================================================= */\nexport async function getArticlesAction(): Promise<ArtigoNoticia[]> {\n  try {\n    await dbService.setupDatabase(); // garante tabela\n    const articles = await dbService.getArticles();\n    return articles;\n  } catch (error) {\n    console.error(\"‚ùå Erro em getArticlesAction:\", error);\n    return [];\n  }\n}\n"],"names":[],"mappings":";;;;;;;IAUsB,+BAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA","debugId":null}},
    {"offset": {"line": 829, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows/Documents/AIGP/aigp/components/AgentCard.tsx"],"sourcesContent":["\nimport React from 'react';\nimport { Agente, StatusAgente, NomeAgente } from '../types';\nimport { CheckCircle, Zap, XCircle, Loader, Calendar, Bot, UploadCloud, Search } from 'lucide-react';\n\ninterface AgentCardProps {\n  agent: Agente;\n}\n\nconst statusConfig = {\n  [StatusAgente.PENDENTE]: { icon: <Zap size={24} className=\"text-gray-400\" />, color: 'border-gray-700', text: 'text-gray-400' },\n  [StatusAgente.EXECUTANDO]: { icon: <Loader size={24} className=\"text-primary animate-spin\" />, color: 'border-primary', text: 'text-primary' },\n  [StatusAgente.CONCLUIDO]: { icon: <CheckCircle size={24} className=\"text-secondary\" />, color: 'border-secondary', text: 'text-secondary' },\n  [StatusAgente.ERRO]: { icon: <XCircle size={24} className=\"text-danger\" />, color: 'border-danger', text: 'text-danger' },\n};\n\nconst agentIcons: { [key in NomeAgente]: React.ReactNode } = {\n  [NomeAgente.CALENDARIO]: <Calendar size={32} />,\n  [NomeAgente.ESCRITOR]: <Bot size={32} />,\n  [NomeAgente.FORMATADOR]: <Bot size={32} />,\n  [NomeAgente.SEO]: <Search size={32} />,\n  [NomeAgente.PUBLICADOR]: <UploadCloud size={32} />,\n};\n\nconst AgentCard: React.FC<AgentCardProps> = ({ agent }) => {\n  const { icon, color, text } = statusConfig[agent.status];\n\n  return (\n    <div className={`bg-gray-800 rounded-lg p-5 border-l-4 transition-all duration-300 ${color} shadow-lg flex flex-col justify-between h-full`}>\n      <div>\n        <div className=\"flex justify-between items-start\">\n          <div className={`p-3 rounded-full bg-gray-700/50 text-gray-200`}>\n            {agentIcons[agent.name]}\n          </div>\n          {icon}\n        </div>\n        <h3 className=\"text-lg font-bold text-white mt-4\">{agent.name}</h3>\n        <p className=\"text-sm text-gray-400 mt-1\">{agent.description}</p>\n      </div>\n      <div className=\"mt-4 flex flex-col justify-end\">\n        {agent.model && <p className=\"text-xs text-gray-500 font-mono bg-gray-900 px-2 py-1 rounded w-fit\">{agent.model}</p>}\n        <p className={`text-sm font-semibold mt-2 ${text}`}>{agent.status}</p>\n      </div>\n    </div>\n  );\n};\n\nexport default AgentCard;"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AAMA,MAAM,eAAe;IACnB,CAAC,qHAAY,CAAC,QAAQ,CAAC,EAAE;QAAE,oBAAM,8OAAC,uMAAG;YAAC,MAAM;YAAI,WAAU;;;;;;QAAoB,OAAO;QAAmB,MAAM;IAAgB;IAC9H,CAAC,qHAAY,CAAC,UAAU,CAAC,EAAE;QAAE,oBAAM,8OAAC,gNAAM;YAAC,MAAM;YAAI,WAAU;;;;;;QAAgC,OAAO;QAAkB,MAAM;IAAe;IAC7I,CAAC,qHAAY,CAAC,SAAS,CAAC,EAAE;QAAE,oBAAM,8OAAC,0OAAW;YAAC,MAAM;YAAI,WAAU;;;;;;QAAqB,OAAO;QAAoB,MAAM;IAAiB;IAC1I,CAAC,qHAAY,CAAC,IAAI,CAAC,EAAE;QAAE,oBAAM,8OAAC,uNAAO;YAAC,MAAM;YAAI,WAAU;;;;;;QAAkB,OAAO;QAAiB,MAAM;IAAc;AAC1H;AAEA,MAAM,aAAuD;IAC3D,CAAC,mHAAU,CAAC,UAAU,CAAC,gBAAE,8OAAC,sNAAQ;QAAC,MAAM;;;;;;IACzC,CAAC,mHAAU,CAAC,QAAQ,CAAC,gBAAE,8OAAC,uMAAG;QAAC,MAAM;;;;;;IAClC,CAAC,mHAAU,CAAC,UAAU,CAAC,gBAAE,8OAAC,uMAAG;QAAC,MAAM;;;;;;IACpC,CAAC,mHAAU,CAAC,GAAG,CAAC,gBAAE,8OAAC,gNAAM;QAAC,MAAM;;;;;;IAChC,CAAC,mHAAU,CAAC,UAAU,CAAC,gBAAE,8OAAC,mOAAW;QAAC,MAAM;;;;;;AAC9C;AAEA,MAAM,YAAsC,CAAC,EAAE,KAAK,EAAE;IACpD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,YAAY,CAAC,MAAM,MAAM,CAAC;IAExD,qBACE,8OAAC;QAAI,WAAW,CAAC,kEAAkE,EAAE,MAAM,+CAA+C,CAAC;;0BACzI,8OAAC;;kCACC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAW,CAAC,6CAA6C,CAAC;0CAC5D,UAAU,CAAC,MAAM,IAAI,CAAC;;;;;;4BAExB;;;;;;;kCAEH,8OAAC;wBAAG,WAAU;kCAAqC,MAAM,IAAI;;;;;;kCAC7D,8OAAC;wBAAE,WAAU;kCAA8B,MAAM,WAAW;;;;;;;;;;;;0BAE9D,8OAAC;gBAAI,WAAU;;oBACZ,MAAM,KAAK,kBAAI,8OAAC;wBAAE,WAAU;kCAAuE,MAAM,KAAK;;;;;;kCAC/G,8OAAC;wBAAE,WAAW,CAAC,2BAA2B,EAAE,MAAM;kCAAG,MAAM,MAAM;;;;;;;;;;;;;;;;;;AAIzE;uCAEe","debugId":null}},
    {"offset": {"line": 1017, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows/Documents/AIGP/aigp/components/GeneratedPost.tsx"],"sourcesContent":["\nimport React from 'react';\nimport { ArtigoNoticia } from '../types';\nimport { BadgeCheck } from 'lucide-react';\n\ninterface GeneratedPostProps {\n  article: ArtigoNoticia;\n}\n\nconst GeneratedPost: React.FC<GeneratedPostProps> = ({ article }) => {\n  return (\n    <div className=\"bg-gray-800 border border-gray-700 rounded-lg p-6 mt-8\">\n      <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6\">\n        <h2 className=\"text-2xl font-bold text-white\">Pr√©-visualiza√ß√£o do Post Gerado</h2>\n        {article.published && (\n            <div className=\"mt-2 sm:mt-0 flex items-center gap-2 text-sm font-semibold bg-secondary/20 text-secondary px-3 py-1.5 rounded-full\">\n                <BadgeCheck size={18} />\n                <span>Publicado com Sucesso</span>\n            </div>\n        )}\n      </div>\n\n      <div className=\"space-y-6\">\n        <h1 className=\"text-3xl lg:text-4xl font-extrabold text-white\">{article.title}</h1>\n\n        {/* SEO Metadata */}\n        <div className=\"bg-gray-900/50 border border-gray-700 rounded-lg p-4 space-y-4\">\n            <h3 className=\"font-semibold text-lg text-white\">Metadados de SEO</h3>\n            <div>\n                <h4 className=\"font-medium text-gray-300\">Meta Description</h4>\n                <p className=\"text-sm text-gray-400 italic mt-1\">{article.metaDescription}</p>\n            </div>\n            <div>\n                <h4 className=\"font-medium text-gray-300\">Palavras-chave</h4>\n                <div className=\"flex flex-wrap gap-2 mt-2\">\n                    {article.keywords?.map((keyword, index) => (\n                        <span key={index} className=\"bg-primary/20 text-primary text-xs font-semibold px-2.5 py-1 rounded-full\">\n                            {keyword}\n                        </span>\n                    ))}\n                </div>\n            </div>\n        </div>\n\n        {article.formattedContent && (\n          <div\n            className=\"text-gray-300\"\n            dangerouslySetInnerHTML={{ __html: article.formattedContent }}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default GeneratedPost;"],"names":[],"mappings":";;;;;AAGA;;;AAMA,MAAM,gBAA8C,CAAC,EAAE,OAAO,EAAE;IAC9D,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAgC;;;;;;oBAC7C,QAAQ,SAAS,kBACd,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,gOAAU;gCAAC,MAAM;;;;;;0CAClB,8OAAC;0CAAK;;;;;;;;;;;;;;;;;;0BAKhB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAkD,QAAQ,KAAK;;;;;;kCAG7E,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAG,WAAU;0CAAmC;;;;;;0CACjD,8OAAC;;kDACG,8OAAC;wCAAG,WAAU;kDAA4B;;;;;;kDAC1C,8OAAC;wCAAE,WAAU;kDAAqC,QAAQ,eAAe;;;;;;;;;;;;0CAE7E,8OAAC;;kDACG,8OAAC;wCAAG,WAAU;kDAA4B;;;;;;kDAC1C,8OAAC;wCAAI,WAAU;kDACV,QAAQ,QAAQ,EAAE,IAAI,CAAC,SAAS,sBAC7B,8OAAC;gDAAiB,WAAU;0DACvB;+CADM;;;;;;;;;;;;;;;;;;;;;;oBAQ1B,QAAQ,gBAAgB,kBACvB,8OAAC;wBACC,WAAU;wBACV,yBAAyB;4BAAE,QAAQ,QAAQ,gBAAgB;wBAAC;;;;;;;;;;;;;;;;;;AAMxE;uCAEe","debugId":null}},
    {"offset": {"line": 1180, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows/Documents/AIGP/aigp/components/Dashboard.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useCallback, useMemo } from \"react\";\nimport {\n  NomeAgente,\n  StatusAgente,\n  type Agente,\n  type EventoCalendario,\n  type ArtigoNoticia,\n} from \"../types\";\nimport { generateAndSaveArticleAction } from \"../app/actions\";\nimport AgentCard from \"./AgentCard\";\nimport GeneratedPost from \"./GeneratedPost\";\nimport { PlayCircle } from \"lucide-react\";\n\nconst initialAgents: Agente[] = [\n  {\n    name: NomeAgente.CALENDARIO,\n    description: \"Busca o t√≥pico da not√≠cia de hoje no calend√°rio.\",\n    status: StatusAgente.PENDENTE,\n  },\n  {\n    name: NomeAgente.ESCRITOR,\n    description: \"Escreve o artigo de not√≠cia com base no t√≥pico.\",\n    status: StatusAgente.PENDENTE,\n    model: \"gemini-2.5-pro\",\n  },\n  {\n    name: NomeAgente.FORMATADOR,\n    description: \"Formata o artigo em HTML estilizado.\",\n    status: StatusAgente.PENDENTE,\n    model: \"gemini-2.5-flash\",\n  },\n  {\n    name: NomeAgente.SEO,\n    description: \"Analisa o SEO e extrai metadados.\",\n    status: StatusAgente.PENDENTE,\n    model: \"gemini-2.5-flash\",\n  },\n  {\n    name: NomeAgente.PUBLICADOR,\n    description: \"Salva o artigo final no banco de dados.\",\n    status: StatusAgente.PENDENTE,\n  },\n];\n\ninterface DashboardProps {\n  language?: string;\n  focusKeywords?: string;\n  onArticleGenerated?: (article: ArtigoNoticia) => void;\n}\n\nconst Dashboard: React.FC<DashboardProps> = ({\n  language = \"Portugu√™s\",\n  focusKeywords = \"\",\n  onArticleGenerated,\n}) => {\n  const [agents, setAgents] = useState<Agente[]>(initialAgents);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [currentEvent, setCurrentEvent] = useState<EventoCalendario | null>(\n    null\n  );\n  const [article, setArticle] = useState<ArtigoNoticia | null>(null);\n\n  const updateAgentStatus = useCallback(\n    (agentName: NomeAgente, status: StatusAgente) => {\n      console.log(`[Dashboard] üß© Atualizando status do agente ${agentName} ‚Üí ${status}`);\n      setAgents((prev) =>\n        prev.map((agent) =>\n          agent.name === agentName ? { ...agent, status } : agent\n        )\n      );\n    },\n    []\n  );\n\n  const resetState = useCallback(() => {\n    console.log(\"[Dashboard] üîÑ Resetando estado inicial do pipeline...\");\n    setAgents(initialAgents);\n    setIsProcessing(false);\n    setCurrentEvent(null);\n    setArticle(null);\n  }, []);\n\n  const handleStartGeneration = useCallback(async () => {\n    console.group(\"üöÄ [Dashboard] Iniciando pipeline de gera√ß√£o de not√≠cia\");\n    resetState();\n    setIsProcessing(true);\n\n    try {\n      // 1Ô∏è‚É£ Buscar evento de hoje no calend√°rio\n      console.log(\"[Dashboard] üóìÔ∏è Iniciando sincroniza√ß√£o com Google Calendar...\");\n      updateAgentStatus(NomeAgente.CALENDARIO, StatusAgente.EXECUTANDO);\n\n      const res = await fetch(\"/api/calendar/today\");\n      const data = await res.json();\n      console.log(\"[Dashboard] üìÖ Resposta do endpoint /api/calendar/today:\", data);\n\n      const event = data?.events?.[0];\n      if (!event) throw new Error(\"Nenhum evento encontrado para hoje.\");\n\n      const startDateRaw =\n        event.start?.dateTime ||\n        event.start?.date ||\n        event.start ||\n        event.startTime ||\n        event.start_date;\n\n      let formattedDate = \"\";\n      try {\n        formattedDate = new Date(startDateRaw).toISOString().split(\"T\")[0];\n      } catch {\n        console.warn(\"[Dashboard] ‚ö†Ô∏è Data inv√°lida recebida do evento:\", startDateRaw);\n        formattedDate = new Date().toISOString().split(\"T\")[0];\n      }\n\n      const evento: EventoCalendario = {\n        summary: event.title || \"Evento sem t√≠tulo\",\n        date: formattedDate,\n      };\n\n      console.log(\"[Dashboard] ‚úÖ Evento identificado:\", evento);\n      setCurrentEvent(evento);\n      updateAgentStatus(NomeAgente.CALENDARIO, StatusAgente.CONCLUIDO);\n\n      // 2Ô∏è‚É£ Escritor - gerar artigo principal\n      console.log(\"[Dashboard] ‚úçÔ∏è Iniciando gera√ß√£o do artigo...\");\n      updateAgentStatus(NomeAgente.ESCRITOR, StatusAgente.EXECUTANDO);\n\n      const finalArticle = await generateAndSaveArticleAction(\n        evento.summary,\n        language,\n        focusKeywords\n      );\n\n      console.log(\"[Dashboard] ‚úÖ Artigo gerado com sucesso:\", finalArticle);\n\n      updateAgentStatus(NomeAgente.ESCRITOR, StatusAgente.CONCLUIDO);\n\n      // 3Ô∏è‚É£ Formatador - formata em HTML\n      console.log(\"[Dashboard] üé® Formatando artigo em HTML...\");\n      updateAgentStatus(NomeAgente.FORMATADOR, StatusAgente.EXECUTANDO);\n      await new Promise((resolve) => setTimeout(resolve, 100)); // delay apenas para efeito visual\n      updateAgentStatus(NomeAgente.FORMATADOR, StatusAgente.CONCLUIDO);\n\n      // 4Ô∏è‚É£ SEO - an√°lise e metadados\n      console.log(\"[Dashboard] üîç Iniciando an√°lise SEO...\");\n      updateAgentStatus(NomeAgente.SEO, StatusAgente.EXECUTANDO);\n      await new Promise((resolve) => setTimeout(resolve, 100));\n      updateAgentStatus(NomeAgente.SEO, StatusAgente.CONCLUIDO);\n\n      // 5Ô∏è‚É£ Publicador - salvar resultado\n      console.log(\"[Dashboard] üíæ Publicando artigo...\");\n      updateAgentStatus(NomeAgente.PUBLICADOR, StatusAgente.CONCLUIDO);\n\n      setArticle(finalArticle);\n\n      if (onArticleGenerated) {\n        console.log(\"[Dashboard] üì§ Chamando callback onArticleGenerated...\");\n        onArticleGenerated(finalArticle);\n      }\n\n      console.log(\"[Dashboard] üéâ Pipeline finalizado com sucesso!\");\n    } catch (error) {\n      console.error(\"[Dashboard] ‚ùå Erro durante o processo de gera√ß√£o:\", error);\n\n      const runningAgent = agents.find((a) => a.status === StatusAgente.EXECUTANDO);\n      if (runningAgent) {\n        console.log(`[Dashboard] ‚ö†Ô∏è Definindo agente com erro: ${runningAgent.name}`);\n        updateAgentStatus(runningAgent.name, StatusAgente.ERRO);\n      } else {\n        console.warn(\"[Dashboard] ‚ö†Ô∏è Nenhum agente em execu√ß√£o detectado no momento do erro.\");\n        updateAgentStatus(NomeAgente.ESCRITOR, StatusAgente.ERRO);\n      }\n    } finally {\n      setIsProcessing(false);\n      console.groupEnd();\n    }\n  }, [resetState, updateAgentStatus, language, focusKeywords, onArticleGenerated, agents]);\n\n  const isPipelineFinished = useMemo(\n    () => agents.every((a) => a.status === StatusAgente.CONCLUIDO),\n    [agents]\n  );\n\n  return (\n    <div className=\"space-y-8\">\n      <div>\n        <h1 className=\"text-3xl font-bold text-white\">\n          Painel de Gera√ß√£o de Not√≠cias\n        </h1>\n        <p className=\"mt-2 text-gray-400\">\n          Automatize seu pipeline di√°rio de cria√ß√£o de not√≠cias.\n        </p>\n      </div>\n\n      <div className=\"bg-gray-800 border border-gray-700 rounded-lg p-6 flex flex-col sm:flex-row items-center justify-between gap-4\">\n        <div>\n          <h2 className=\"text-xl font-semibold text-white\">\n            Pipeline de Automa√ß√£o Di√°ria\n          </h2>\n          <p className=\"text-gray-400 mt-1\">\n            {currentEvent\n              ? `T√≥pico de Hoje: \"${currentEvent.summary}\"`\n              : \"Clique em iniciar para come√ßar o processo.\"}\n          </p>\n        </div>\n        <button\n          onClick={handleStartGeneration}\n          disabled={isProcessing}\n          className=\"w-full sm:w-auto flex items-center justify-center gap-2 px-6 py-3 font-semibold text-white bg-primary rounded-lg shadow-md hover:bg-primary-hover disabled:bg-gray-600 disabled:cursor-not-allowed transition-colors duration-200\"\n        >\n          <PlayCircle size={20} />\n          <span>\n            {isProcessing ? \"Processando...\" : \"Iniciar Gera√ß√£o Di√°ria\"}\n          </span>\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6\">\n        {agents.map((agent) => (\n          <AgentCard key={agent.name} agent={agent} />\n        ))}\n      </div>\n\n      {article && (\n        <>\n          <h2 className=\"text-2xl font-bold text-white mt-10\">\n            Artigo Gerado\n          </h2>\n          <GeneratedPost article={article} />\n        </>\n      )}\n\n      {isPipelineFinished && (\n        <p className=\"text-center text-green-400 font-semibold\">\n          ‚úÖ Todos os agentes conclu√≠ram o processo com sucesso!\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default Dashboard;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1464, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows/Documents/AIGP/aigp/components/HistoryScreen.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from 'react';\nimport { ArtigoNoticia } from '../types';\nimport { ChevronDown, ChevronUp, Calendar } from 'lucide-react';\n\ninterface HistoryItemProps {\n  article: ArtigoNoticia;\n}\n\nconst HistoryItem: React.FC<HistoryItemProps> = ({ article }) => {\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  return (\n    <div className=\"bg-gray-800 border border-gray-700 rounded-lg overflow-hidden\">\n      <button\n        onClick={() => setIsExpanded(!isExpanded)}\n        className=\"w-full text-left p-4 flex justify-between items-center hover:bg-gray-700/50 focus:outline-none\"\n        aria-expanded={isExpanded}\n      >\n        <div>\n          <h3 className=\"font-semibold text-white\">{article.title}</h3>\n          <p className=\"text-sm text-gray-400 mt-1 flex items-center gap-2\">\n            <Calendar size={14} />\n            Gerado em: {new Date(article.generationDate).toLocaleString('pt-BR')}\n          </p>\n        </div>\n        {isExpanded ? <ChevronUp size={20} /> : <ChevronDown size={20} />}\n      </button>\n      {isExpanded && (\n        <div className=\"p-6 border-t border-gray-700 space-y-6\">\n           <div className=\"bg-gray-900/50 border border-gray-700 rounded-lg p-4 space-y-4\">\n              <h3 className=\"font-semibold text-lg text-white\">Metadados de SEO</h3>\n              <div>\n                  <h4 className=\"font-medium text-gray-300\">Meta Description</h4>\n                  <p className=\"text-sm text-gray-400 italic mt-1\">{article.metaDescription}</p>\n              </div>\n              <div>\n                  <h4 className=\"font-medium text-gray-300\">Palavras-chave</h4>\n                  <div className=\"flex flex-wrap gap-2 mt-2\">\n                      {article.keywords?.map((keyword, index) => (\n                          <span key={index} className=\"bg-primary/20 text-primary text-xs font-semibold px-2.5 py-1 rounded-full\">\n                              {keyword}\n                          </span>\n                      ))}\n                  </div>\n              </div>\n          </div>\n          <div\n            className=\"text-gray-300 prose prose-invert max-w-none\"\n            dangerouslySetInnerHTML={{ __html: article.formattedContent }}\n          />\n        </div>\n      )}\n    </div>\n  );\n};\n\ninterface HistoryScreenProps {\n  initialArticles?: ArtigoNoticia[];\n}\n\nconst HistoryScreen: React.FC<HistoryScreenProps> = ({ initialArticles }) => {\n  const [articles] = useState(initialArticles);\n  \n  return (\n    <div className=\"space-y-8\">\n      <div>\n        <h1 className=\"text-3xl font-bold text-white\">Hist√≥rico de Not√≠cias</h1>\n        <p className=\"mt-2 text-gray-400\">\n          Veja todos os artigos gerados anteriormente.\n        </p>\n      </div>\n      {articles.length > 0 ? (\n        <div className=\"space-y-4\">\n          {articles.map(article => (\n            <HistoryItem key={article.id} article={article} />\n          ))}\n        </div>\n      ) : (\n        <div className=\"bg-gray-800 border border-gray-700 rounded-lg p-8 text-center\">\n          <h2 className=\"text-xl font-semibold text-white\">Nenhum artigo gerado ainda</h2>\n          <p className=\"text-gray-400 mt-2\">V√° para o painel e inicie a gera√ß√£o para ver seu hist√≥rico aqui.</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default HistoryScreen;"],"names":[],"mappings":";;;;;AAEA;AAEA;AAAA;AAAA;AAJA;;;;AAUA,MAAM,cAA0C,CAAC,EAAE,OAAO,EAAE;IAC1D,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAE7C,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBACC,SAAS,IAAM,cAAc,CAAC;gBAC9B,WAAU;gBACV,iBAAe;;kCAEf,8OAAC;;0CACC,8OAAC;gCAAG,WAAU;0CAA4B,QAAQ,KAAK;;;;;;0CACvD,8OAAC;gCAAE,WAAU;;kDACX,8OAAC,sNAAQ;wCAAC,MAAM;;;;;;oCAAM;oCACV,IAAI,KAAK,QAAQ,cAAc,EAAE,cAAc,CAAC;;;;;;;;;;;;;oBAG/D,2BAAa,8OAAC,6NAAS;wBAAC,MAAM;;;;;iFAAS,8OAAC,mOAAW;wBAAC,MAAM;;;;;;;;;;;;YAE5D,4BACC,8OAAC;gBAAI,WAAU;;kCACZ,8OAAC;wBAAI,WAAU;;0CACZ,8OAAC;gCAAG,WAAU;0CAAmC;;;;;;0CACjD,8OAAC;;kDACG,8OAAC;wCAAG,WAAU;kDAA4B;;;;;;kDAC1C,8OAAC;wCAAE,WAAU;kDAAqC,QAAQ,eAAe;;;;;;;;;;;;0CAE7E,8OAAC;;kDACG,8OAAC;wCAAG,WAAU;kDAA4B;;;;;;kDAC1C,8OAAC;wCAAI,WAAU;kDACV,QAAQ,QAAQ,EAAE,IAAI,CAAC,SAAS,sBAC7B,8OAAC;gDAAiB,WAAU;0DACvB;+CADM;;;;;;;;;;;;;;;;;;;;;;kCAO3B,8OAAC;wBACC,WAAU;wBACV,yBAAyB;4BAAE,QAAQ,QAAQ,gBAAgB;wBAAC;;;;;;;;;;;;;;;;;;AAMxE;AAMA,MAAM,gBAA8C,CAAC,EAAE,eAAe,EAAE;IACtE,MAAM,CAAC,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAE5B,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;;kCACC,8OAAC;wBAAG,WAAU;kCAAgC;;;;;;kCAC9C,8OAAC;wBAAE,WAAU;kCAAqB;;;;;;;;;;;;YAInC,SAAS,MAAM,GAAG,kBACjB,8OAAC;gBAAI,WAAU;0BACZ,SAAS,GAAG,CAAC,CAAA,wBACZ,8OAAC;wBAA6B,SAAS;uBAArB,QAAQ,EAAE;;;;;;;;;yEAIhC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAmC;;;;;;kCACjD,8OAAC;wBAAE,WAAU;kCAAqB;;;;;;;;;;;;;;;;;;AAK5C;uCAEe","debugId":null}},
    {"offset": {"line": 1717, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows/Documents/AIGP/aigp/app/actions.ts"],"sourcesContent":["\"use server\";\n\nimport { revalidatePath } from \"next/cache\";\nimport * as geminiService from \"../services/geminiService\";\nimport * as dbService from \"../services/db\";\nimport { ArtigoNoticia } from \"../types\";\n\n/* =========================================================\n   üîπ MODO COMPLETO (para compatibilidade retroativa)\n   ========================================================= */\nexport async function generateAndSaveArticleAction(\n  topic: string,\n  language: string,\n  focusKeywords: string\n): Promise<ArtigoNoticia> {\n  try {\n    // üß† Etapa 1: IA Escritora\n    const rawContent = await geminiService.writeNewsArticle(topic, language, focusKeywords);\n\n    // üé® Etapa 2: IA Formatadora\n    const formattedContent = await geminiService.formatArticleToHtml(rawContent);\n\n    // üîç Etapa 3: IA de SEO\n    const { keywords, metaDescription } = await geminiService.analyzeSeoAndExtractMetadata(rawContent, focusKeywords);\n\n    // üíæ Etapa 4: Salvar tudo no banco\n    const articleToSave: Omit<ArtigoNoticia, \"id\"> = {\n      title: topic,\n      rawContent,\n      formattedContent,\n      generationDate: new Date().toISOString(),\n      published: false,\n      keywords,\n      metaDescription,\n    };\n\n    const savedArticle = await dbService.saveArticle(articleToSave);\n\n    // üîÅ Revalida hist√≥rico no dashboard\n    revalidatePath(\"/dashboard/history\");\n\n    return { ...savedArticle, published: true };\n  } catch (error) {\n    console.error(\"‚ùå Erro em generateAndSaveArticleAction:\", error);\n    throw new Error(`Falha ao gerar e salvar o artigo: ${error instanceof Error ? error.message : String(error)}`);\n  }\n}\n\n/* =========================================================\n   üîπ MODO MODULAR (para pipeline dividido)\n   ========================================================= */\n\n/** 1Ô∏è‚É£ Gera o texto base e salva como rascunho */\nexport async function saveArticleDraft(data: {\n  title: string;\n  content: string;\n  language: string;\n  focusKeywords: string;\n  status?: string;\n}) {\n  try {\n    const articleToSave: Omit<ArtigoNoticia, \"id\"> = {\n      title: data.title,\n      rawContent: data.content,\n      formattedContent: \"\",\n      generationDate: new Date().toISOString(),\n      published: false,\n      keywords: [\"\"],\n      metaDescription: \"\",\n    };\n\n    const saved = await dbService.saveArticle(articleToSave);\n    console.log(`‚úÖ Rascunho salvo com ID: ${saved.id}`);\n    revalidatePath(\"/dashboard/history\");\n    return saved;\n  } catch (error) {\n    console.error(\"‚ùå Erro ao salvar rascunho:\", error);\n    throw new Error(\"Falha ao salvar rascunho.\");\n  }\n}\n\n/** 2Ô∏è‚É£ Busca artigo pelo ID */\nexport async function getArticleById(id: string): Promise<ArtigoNoticia | null> {\n  try {\n    const article = await dbService.getArticleById(id);\n    return article;\n  } catch (error) {\n    console.error(\"‚ùå Erro ao buscar artigo:\", error);\n    return null;\n  }\n}\n\n/** 3Ô∏è‚É£ Atualiza HTML formatado */\nexport async function updateArticleHtml(id: string, formattedContent: string) {\n  try {\n    await dbService.updateArticle(id, { formattedContent });\n    console.log(`üé® HTML atualizado com sucesso para o artigo ${id}`);\n    revalidatePath(\"/dashboard/history\");\n  } catch (error) {\n    console.error(\"‚ùå Erro ao atualizar HTML:\", error);\n    throw new Error(\"Falha ao atualizar o HTML do artigo.\");\n  }\n}\n\n/** 4Ô∏è‚É£ Atualiza dados de SEO e marca como publicado */\n\nexport async function updateArticleSeo(\n  id: string,\n  data: { keywords: string[] | string; metaDescription: string; status?: string }\n) {\n  try {\n    // üß† Garante que keywords sempre ser√° um array de strings\n    let keywords: string[];\n\n    if (Array.isArray(data.keywords)) {\n      keywords = data.keywords;\n    } else if (typeof data.keywords === \"string\") {\n      keywords = data.keywords.split(\",\").map((k) => k.trim());\n    } else {\n      keywords = [];\n    }\n\n    const metaDescription = data.metaDescription || \"\";\n\n    await dbService.updateArticle(id, {\n      keywords,\n      metaDescription,\n      published: true,\n      generationDate: new Date().toISOString(),\n    });\n\n    console.log(`üîç SEO atualizado e artigo ${id} publicado com sucesso.`);\n    revalidatePath(\"/dashboard/history\");\n  } catch (error: any) {\n    console.error(\"‚ùå Erro ao atualizar SEO:\", error);\n    throw new Error(\n      error?.message || \"Falha ao atualizar os dados de SEO do artigo.\"\n    );\n  }\n}\n\n\n\n/* =========================================================\n   üîπ LISTAGEM (inalterada)\n   ========================================================= */\nexport async function getArticlesAction(): Promise<ArtigoNoticia[]> {\n  try {\n    await dbService.setupDatabase(); // garante tabela\n    const articles = await dbService.getArticles();\n    return articles;\n  } catch (error) {\n    console.error(\"‚ùå Erro em getArticlesAction:\", error);\n    return [];\n  }\n}\n"],"names":[],"mappings":";;;;;;;IAkJsB,oBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA","debugId":null}},
    {"offset": {"line": 1729, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows/Documents/AIGP/aigp/app/dashboard/history/page.tsx"],"sourcesContent":["import HistoryScreen from \"../../../components/HistoryScreen\";\nimport { getArticlesAction } from \"../../actions\";\nimport { ArtigoNoticia } from \"../../../types\";\n\nexport default async function HistoryPage() {\n  const articles: ArtigoNoticia[] = await getArticlesAction();\n\n  return <HistoryScreen initialArticles={articles} />;\n}"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAGe,eAAe;IAC5B,MAAM,WAA4B,MAAM,IAAA,gKAAiB;IAEzD,qBAAO,8OAAC,uIAAa;QAAC,iBAAiB;;;;;;AACzC","debugId":null}},
    {"offset": {"line": 1753, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows/Documents/AIGP/aigp/app/dashboard/layout.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport { SettingsProvider } from \"../../context/SettingsContext\";\nimport { Sidebar, SidebarIcon } from \"../../components/Sidebar\";\nimport { SettingsScreen } from \"../../components/SettingsScreen\";\nimport { Home, Settings, Bot, HistoryIcon } from \"lucide-react\";\nimport Dashboard from \"@/components/Dashboard\";\nimport HistoryScreen from \"@/components/HistoryScreen\";\nimport HistoryPage from \"./history/page\";\n\nexport default function DashboardLayout() {\n  const { isAuthenticated } = useAuth();\n  const router = useRouter();\n\n  const [activeView, setActiveView] = useState<\"home\" | \"settings\" | \"historico\">(\"home\");\n\n  useEffect(() => {\n    if (!isAuthenticated) router.replace(\"/\");\n  }, [isAuthenticated, router]);\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"flex items-center justify-center h-screen bg-gray-900 text-white\">\n        Carregando...\n      </div>\n    );\n  }\n\n  return (\n    <SettingsProvider>\n      <div className=\"flex h-screen bg-gray-900 text-gray-200\">\n        <Sidebar>\n          <SidebarIcon\n            icon={<Home size={22} />}\n            text=\"In√≠cio\"\n            active={activeView === \"home\"}\n            onClick={() => setActiveView(\"home\")}\n          />\n          <SidebarIcon\n            icon={<Settings size={22} />}\n            text=\"Configura√ß√µes\"\n            active={activeView === \"settings\"}\n            onClick={() => setActiveView(\"settings\")}\n          />\n          <SidebarIcon\n            icon={<HistoryIcon size={22} />}\n            text=\"Hist√≥rico\"\n            active={activeView === \"historico\"}\n            onClick={() => setActiveView(\"historico\")}\n          />\n        </Sidebar>\n\n        <main className=\"flex-1 p-6 overflow-y-auto\">\n          {activeView === \"home\" && (\n            <Dashboard />\n          )}\n\n          {activeView === \"settings\" && (\n            <SettingsScreen\n              currentLanguage=\"Portugu√™s do Brasil\"\n              currentFocusKeywords=\"tecnologia, IA, inova√ß√£o\"\n              onSave={(data) => console.log(\"Configura√ß√µes salvas:\", data)}\n            />\n          )}\n\n          {activeView === \"historico\" && (\n            <HistoryPage />\n          )}\n        </main>\n      </div>\n    </SettingsProvider>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AAXA;;;;;;;;;;;AAae,SAAS;IACtB,MAAM,EAAE,eAAe,EAAE,GAAG,IAAA,kIAAO;IACnC,MAAM,SAAS,IAAA,+IAAS;IAExB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAoC;IAEhF,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,iBAAiB,OAAO,OAAO,CAAC;IACvC,GAAG;QAAC;QAAiB;KAAO;IAE5B,IAAI,CAAC,iBAAiB;QACpB,qBACE,8OAAC;YAAI,WAAU;sBAAmE;;;;;;IAItF;IAEA,qBACE,8OAAC,+IAAgB;kBACf,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC,iIAAO;;sCACN,8OAAC,qIAAW;4BACV,oBAAM,8OAAC,2MAAI;gCAAC,MAAM;;;;;;4BAClB,MAAK;4BACL,QAAQ,eAAe;4BACvB,SAAS,IAAM,cAAc;;;;;;sCAE/B,8OAAC,qIAAW;4BACV,oBAAM,8OAAC,sNAAQ;gCAAC,MAAM;;;;;;4BACtB,MAAK;4BACL,QAAQ,eAAe;4BACvB,SAAS,IAAM,cAAc;;;;;;sCAE/B,8OAAC,qIAAW;4BACV,oBAAM,8OAAC,2NAAW;gCAAC,MAAM;;;;;;4BACzB,MAAK;4BACL,QAAQ,eAAe;4BACvB,SAAS,IAAM,cAAc;;;;;;;;;;;;8BAIjC,8OAAC;oBAAK,WAAU;;wBACb,eAAe,wBACd,8OAAC,mIAAS;;;;;wBAGX,eAAe,4BACd,8OAAC,+IAAc;4BACb,iBAAgB;4BAChB,sBAAqB;4BACrB,QAAQ,CAAC,OAAS,QAAQ,GAAG,CAAC,yBAAyB;;;;;;wBAI1D,eAAe,6BACd,8OAAC,+IAAW;;;;;;;;;;;;;;;;;;;;;;AAMxB","debugId":null}}]
}